<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Known VM Setup Issues &#8212; ComNetsEmu v0.3.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Roadmap of ComNetsEmu" href="roadmap.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">ComNetsEmu</a></h1>



<p class="blurb">A virtual emulator/testbed designed for the book: Computing in Communication Networks: From Theory to Practice</p>






<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="ref_links.html">Reference Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap of ComNetsEmu</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Known VM Setup Issues</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#on-windows">On Windows</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="roadmap.html" title="previous chapter">Roadmap of ComNetsEmu</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="known-vm-setup-issues">
<h1>Known VM Setup Issues<a class="headerlink" href="#known-vm-setup-issues" title="Permalink to this heading">¶</a></h1>
<section id="on-windows">
<h2>On Windows<a class="headerlink" href="#on-windows" title="Permalink to this heading">¶</a></h2>
<ol class="arabic">
<li><p>Issue: Failed to run the install.sh during <code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">up</span></code> on Windows. ‘bash\r’: No such file or directory or
‘\r’command not found.</p>
<ul class="simple">
<li><p>Potential cause:
Some Windows editions (e.g. TUD Windows Enterprise) somehow silently modify the files in the shared
folder which is by default enabled in Vagrantfile. The installer script is modified into Windows format which has a
different line endings compared to Unix-like OSes like GNU/Linux.</p></li>
<li><p>Solution:
You can run <code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">ssh</span> <span class="pre">comnetsemu</span></code> to log into the VM.
Install the <code class="docutils literal notranslate"><span class="pre">dos2unix</span></code> tool via <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">dos2unix</span></code>
Then reformat the installer script with <code class="docutils literal notranslate"><span class="pre">dos2unix</span> <span class="pre">~/comnetsemu/util/install.sh</span></code>
Run the installer script inside the VM via <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">~/comnetsemu/util/install.sh</span> <span class="pre">&amp;&amp;</span> <span class="pre">bash</span> <span class="pre">./install.sh</span> <span class="pre">-a</span></code></p></li>
<li><p>Suggestion:
If you want to keep the synced folder feature e.g. for develop in host OS and test codes inside the VM.
It is suggested to make sure the used editor/IDE on Windows host OS save files with Unix-style format to avoid
conflicts.
You can also disable synced folder feature in Vagrantfile by commenting out lines starts with <code class="docutils literal notranslate"><span class="pre">comnetsemu.vm.synced_folder</span></code>.</p></li>
</ul>
</li>
<li><p>Issue: Failed to open xterms for running nodes.</p>
<ul class="simple">
<li><p>Potential cause:
The terminal you use does not support X11-forwarding via SSH.</p></li>
<li><p>Solution:
<a class="reference external" href="https://mobaxterm.mobatek.net/">Mobaxterm</a> could be used as the console to solve the problem.</p></li>
</ul>
</li>
<li><p>Issue: Failed to open xterms with sudo inside the VM.</p>
<p>If run <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">xterm</span></code> inside the VM or run <code class="docutils literal notranslate"><span class="pre">xterm</span> <span class="pre">h1</span></code> inside the ComNetsEmu’s CLI returns the following error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">Warning</span><span class="p">:</span> <span class="n">This</span> <span class="n">program</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">suid</span><span class="o">-</span><span class="n">root</span> <span class="n">program</span> <span class="ow">or</span> <span class="ow">is</span> <span class="n">being</span> <span class="n">run</span> <span class="n">by</span> <span class="n">the</span> <span class="n">root</span> <span class="n">user</span><span class="o">.</span>
<span class="n">The</span> <span class="n">full</span> <span class="n">text</span> <span class="n">of</span> <span class="n">the</span> <span class="n">error</span> <span class="ow">or</span> <span class="n">warning</span> <span class="n">message</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">safely</span> <span class="n">formatted</span>
<span class="ow">in</span> <span class="n">this</span> <span class="n">environment</span><span class="o">.</span> <span class="n">You</span> <span class="n">may</span> <span class="n">get</span> <span class="n">a</span> <span class="n">more</span> <span class="n">descriptive</span> <span class="n">message</span> <span class="n">by</span> <span class="n">running</span> <span class="n">the</span>
<span class="n">program</span> <span class="k">as</span> <span class="n">a</span> <span class="n">non</span><span class="o">-</span><span class="n">root</span> <span class="n">user</span> <span class="ow">or</span> <span class="n">by</span> <span class="n">removing</span> <span class="n">the</span> <span class="n">suid</span> <span class="n">bit</span> <span class="n">on</span> <span class="n">the</span> <span class="n">executable</span><span class="o">.</span>
<span class="n">xterm</span><span class="p">:</span> <span class="n">Xt</span> <span class="n">error</span><span class="p">:</span> <span class="n">Can</span><span class="s1">&#39;t open display: </span><span class="si">%s</span>
</pre></div>
</div>
<ul>
<li><p>Potential cause: It is not allowed on most Unix/Linux systems to keep the X11-forwarding working after changing user to root inside a SSH session.  This is by
default not allowed (e.g. It is allowed in Ubuntu 18.04 but not allowed on Ubuntu 20.04), because the X11 display connection belongs to the user you used to log with
when connecting to your remote SSH server.  X11-forwarding mechanism does not allow anyone to use the open display.</p></li>
<li><p>Solution: You could manually retrieve X credentials in the sudo context by looking up the <code class="docutils literal notranslate"><span class="pre">xauth</span> <span class="pre">list</span></code> for the original username (<code class="docutils literal notranslate"><span class="pre">vagrant</span></code> for the default VM) and
then adding them using following command (You need to do this <strong>Everytime</strong> for a new SSH session.):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>xauth<span class="w"> </span>add<span class="w"> </span><span class="k">$(</span>xauth<span class="w"> </span>-f<span class="w"> </span>/home/vagrant/.Xauthority<span class="w"> </span>list<span class="p">|</span>tail<span class="w"> </span>-1<span class="k">)</span>
</pre></div>
</div>
<p>You can also run this command using Python’s <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> module inside each emulation script.</p>
</li>
</ul>
</li>
</ol>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2023 The Deutsche Telekom Chair of Communication Networks.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/vm_setup_issues.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>